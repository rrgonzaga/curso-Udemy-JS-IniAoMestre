<!doctype html>
<html>
    <head>
        <title>Curso Javascript Completo 2018</title>
        <meta charset="utf-8">      
          
    </head>
    
    <body>
        <div class="container">
            <h1>Curso Javascript Completo 2018</h1>
            
            <button id="btn1" onclick="clicar()">botao 1</button>
            <button id="btn2" onclick="alert('onclick como atributo de btn2');" >botao 2</button>
            <button id="btn3">botao 3</button>
        </div>

        <div class="container">
            <h1>Propagação de eventos</h1>

            <div id="d1" style="background: red; padding: 25px;">
                Texto dentro da div
                <span style="background: yellow;">Texto dentro da span</span>
            </div>
        </div>

        <div id="delegacao" class="container">
            <h1>Delegação de eventos</h1>

            <ul>
                <li>lista 1</li>
                <li>lista 2</li>
                <li>lista 3</li>
            </ul>

        </div>
        
        <script>

            // Seção 08: aula 44. Delegação de eventos

            /* 
                - Técnica que consiste em atrelar o evento a um elemento mais alto 
                e verificar quem foi o elemento clicado.
            */

            console.log('');
            console.log("############## Seção 07: Objetos, aula 44 #######################");
            
            var $d1 = document.querySelector("#d1"); 
            var $d1Span = document.querySelector("#d1 span");

            $d1.addEventListener("click", function(e) {
                console.log("clicou na div d1");
                e.stopPropagation();
            }, false);

            $d1Span.addEventListener("click", function() {
                console.log("clicou no span dentro da div d1"); 
            }, false);

            document.addEventListener("click", function(objEvent) {
                console.log("clicou no elemento document");                
                
                //elemento que foi atrelado ao evento
                console.log('objEvent.currentTarget: ',objEvent.currentTarget);

                //elemento que foi atrelado ao evento
                console.log('this: ',this);

                // elemento exato que recebeu a ação do evento, ou seja, o click
                console.log('objEvent.target: ', objEvent.target);

            }, false);   

            var $ul = document.querySelector("#delegacao ul");
            var $lis = document.querySelectorAll("#delegacao li");

            /*var x = 0; 

            while($lis[x]) {
                $lis[x].addEventListener("click", function(e){
                    e.stopPropagation();
                    console.log("clicou na <li>");
                });
                x++;
            }*/

            $ul.addEventListener("click",function(e){
                //interrrompe a propagação do evento click para os elementos mais acima
                e.stopPropagation(); 

                //elemento que foi atrelado ao evento >> <ul>..</ul>
                console.log("this", this);

                //elemento que foi atrelado ao evento >> <ul>..</ul>
                console.log("e.currentTarget", e.currentTarget); 

                //elemento exato que recebeu a ação do evento, ou seja, o click. Ex.: <li>lista 1</li>.
                console.log("e.target", e.target);

                //tipo do elemento exato que recebeu a ação do evento, ou seja, o click. Ex.: LI. 
                console.log("e.target.nodeName", e.target.nodeName);

                if(e.target.nodeName ==="LI") {
                    alert("clicou em alguma LI");
                }
            })
            
            
        </script>
        
    </body>
</html>